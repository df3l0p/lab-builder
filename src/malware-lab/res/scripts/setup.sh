#!/bin/bash
sed -ie 's/.*/Europe\/Zurich/g' /etc/timezone
ln -sf /usr/share/zoneinfo/Europe/Zurich /etc/localtime
export DEBIAN_FRONTEND=noninteractive
sed -ie 's/#alias ll=.*/alias ll="ls -lah"/g' /root/.bashrc
sed -ie 's/#alias ll=.*/alias ll="ls -lah"/g' /home/vagrant/.bashrc
sed -ie 's/us/ch/g' /etc/default/keyboard
sed -ie 's/XKBVARIANT=""/XKBVARIANT="fr"/g' /etc/default/keyboard
apt-get update
DEBIAN_FRONTEND='noninteractive' apt-get -y -o Dpkg::Options::='--force-confdef' -o Dpkg::Options::='--force-confold' upgrade
DEBIAN_FRONTEND='noninteractive' apt-get -y -o Dpkg::Options::='--force-confdef' -o Dpkg::Options::='--force-confold' dist-upgrade
apt-get autoremove -y
apt-get clean
apt-get autoclean
apt-get install -y isc-dhcp-server python-pip zsh mc inetsim python-magic upx yara ssdeep build-essential libffi-dev python python-dev libfuzzy-dev wireshark tshark
pip install --upgrade pip
pip install pefile
pip install yara-python
pip install ssdeep
cp /vagrant/res/conf/dhcpd.conf /etc/dhcp/dhcpd.conf
sed -ie 's/INTERFACESv4=""/INTERFACESv4="eth1"/g' /etc/default/isc-dhcp-server
systemctl enable isc-dhcp-server.service
systemctl stop isc-dhcp-server.service
systemctl restart isc-dhcp-server.service
cp /vagrant/res/conf/inetsim.conf /etc/inetsim/inetsim.conf
systemctl enable inetsim
systemctl restart inetsim

